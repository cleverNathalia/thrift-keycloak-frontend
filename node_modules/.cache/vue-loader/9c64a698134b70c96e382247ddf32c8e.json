{"remainingRequest":"/home/admin/Documents/thrift-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/admin/Documents/thrift-client/src/App.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/admin/Documents/thrift-client/src/App.vue","mtime":1583505208906},{"path":"/home/admin/Documents/thrift-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/admin/Documents/thrift-client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/admin/Documents/thrift-client/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/admin/Documents/thrift-client/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/admin/Documents/thrift-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/admin/Documents/thrift-client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwovLyBBREQgVEhFIE5FVyBDT01QT05FTlRTCmltcG9ydCBVc2VyIGZyb20gIi4vY29tcG9uZW50cy9Vc2VyLnZ1ZSI7CmltcG9ydCBBZG1pbiBmcm9tICIuL2NvbXBvbmVudHMvQWRtaW4udnVlIjsKaW1wb3J0IE5hdiBmcm9tICIuL2NvbXBvbmVudHMvTmF2LnZ1ZSI7Ci8vIEFERCBLRVlDTE9BSwppbXBvcnQgS2V5Y2xvYWsgZnJvbSAiLi4vbm9kZV9tb2R1bGVzL2tleWNsb2FrLWpzL2Rpc3Qva2V5Y2xvYWsiOwovLyBBREQgVEhSSUZUCmltcG9ydCB7CiAgY3JlYXRlSHR0cENvbm5lY3Rpb24sCiAgY3JlYXRlSHR0cENsaWVudCwKICBIdHRwQ29ubmVjdGlvbiwKICBUQnVmZmVyZWRUcmFuc3BvcnQsCiAgVEpTT05Qcm90b2NvbAp9IGZyb20gInRocmlmdCI7Ci8vQUREIFNUVUJTCi8vIGltcG9ydCB7IENsaWVudCBhcyBIZWxsb1NlcnZpY2VDbGllbnQgfSBmcm9tICJAL2dlbi1qcy9IZWxsb1NlcnZpY2UiOwppbXBvcnQgeyBDbGllbnQgYXMgSGVsbG9TZXJ2aWNlQ2xpZW50IH0gZnJvbSAiQC9nZW4tanMvSGVsbG9TZXJ2aWNlIjsKaW1wb3J0IHsgUGVyc29uIH0gZnJvbSAiQC9nZW4tanMvUGVyc29uIjsKCi8vIFRoZSBsb2NhdGlvbiBvZiB0aGUgc2VydmVyIGVuZHBvaW50CmNvbnN0IENPTkZJRyA9IHsKICBob3N0TmFtZTogImxvY2FsaG9zdCIsCiAgcG9ydDogOTA5MAp9OwoKY29uc3Qgb3B0aW9ucyA9IHsKICB0cmFuc3BvcnQ6IFRCdWZmZXJlZFRyYW5zcG9ydCwKICBwcm90b2NvbDogVEpTT05Qcm90b2NvbCwKICBodHRwczogZmFsc2UsCiAgaGVhZGVyczogewogICAgSG9zdDogQ09ORklHLmhvc3ROYW1lCiAgfQp9OwoKY29uc3QgY29ubmVjdGlvbjogSHR0cENvbm5lY3Rpb24gPSBjcmVhdGVIdHRwQ29ubmVjdGlvbigKICBDT05GSUcuaG9zdE5hbWUsCiAgQ09ORklHLnBvcnQsCiAgb3B0aW9ucwopOwpjb25zdCB0aHJpZnRDbGllbnQ6IEhlbGxvU2VydmljZUNsaWVudCA9IGNyZWF0ZUh0dHBDbGllbnQoCiAgSGVsbG9TZXJ2aWNlQ2xpZW50LAogIGNvbm5lY3Rpb24KKTsKCmV4cG9ydCBkZWZhdWx0IFZ1ZS5leHRlbmQoewogIG5hbWU6ICJBcHAiLAoKICBjb21wb25lbnRzOiB7CiAgICBVc2VyLAogICAgQWRtaW4sCiAgICBOYXYKICB9LAoKICBkYXRhOiAoKSA9PiAoewogICAgY29tcG9uZW50TmFtZTogIiIsCiAgICBwZW9wbGVBcnI6IFtdLAogICAgb2JqQXJyOiBbXSwKICAgIHBlb3BsZUhlYWRlcjogWyJJRCIsICJOYW1lIiwgIkFkZHJlc3MiLCAiUGhvbmUiXSwKICAgIHJvbGU6IFN0cmluZywKICAgIGhlYWRlck5hbWU6IFN0cmluZywKICAgIGluaXRPcHRpb25zOiB7CiAgICAgIHJlYWxtOiAia2V5Y2xvYWstZGVtbyIsCiAgICAgIHVybDogImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hdXRoLyIsCiAgICAgIGNsaWVudElkOiAidnVlLXRlc3QtYXBwIgogICAgfSwKICAgIGtleWNsb2FrOiBLZXljbG9haygpCiAgfSksCiAgbWV0aG9kczogewogICAgbG9hZFBhZ2UoKTogYW55IHsKICAgICAgLy8gVEhJUyBJUyBUSEUgQ09QSUVEIENPREUgRlJPTSBUSEUgS0VZQ0xPQUsgQURNSU5JU1RSQVRJT04gQ09OU09MRS4gSlVTVCBBREFQVCBJVCwgU08gVEhBVCBJVCBNQVRIRVMgVEhJUyBGT1JNQVQKICAgICAgdGhpcy5rZXljbG9hayA9IEtleWNsb2FrKHRoaXMuaW5pdE9wdGlvbnMpOwoKICAgICAgbGV0IHJvbGVzID0gIiI7CgogICAgICB0aGlzLmtleWNsb2FrCiAgICAgICAgLmluaXQoewogICAgICAgICAgb25Mb2FkOiAibG9naW4tcmVxdWlyZWQiCiAgICAgICAgfSkKICAgICAgICAuc3VjY2VzcygoYXV0aDogYW55KSA9PiB7CiAgICAgICAgICAvLyBDSEVDSyBJRiBUSEUgVVNFUiBJUyBBVVRIRU5USUNBVEVECiAgICAgICAgICBpZiAoIWF1dGgpIHsKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIlNVQ0NFU1NGVUxMWSBBVVRIRU5USUNBVEVEIik7CgogICAgICAgICAgICAvLyBDSEVDSyBXSEFUIFJPTEVTIFRIRVkgSEFWRSBBTkQgRElTUExBWSBUSEUgQ09NUE9ORU5UIEFDQ09SRElORyBUTyBUSEUgUk9MRQogICAgICAgICAgICByb2xlcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5rZXljbG9hay50b2tlblBhcnNlZCkpOwogICAgICAgICAgICB0aGlzLnJvbGUgPSByb2xlcy5yZWFsbV9hY2Nlc3Mucm9sZXM7CiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50TmFtZSA9IFN0cmluZyh0aGlzLnJvbGUpOwoKICAgICAgICAgICAgdGhpcy5oZWFkZXJOYW1lID0gdGhpcy5jb21wb25lbnROYW1lID09ICJhZG1pbiIgPyAiZGVlcC1wdXJwbGUgbGlnaHRlbi0xIiA6ICJwdXJwbGUgZGFya2VuLTQiOwoKICAgICAgICAgICAgY29uc29sZS5sb2coIlN1Ym1pdHRpbmcuLi4iKTsKCiAgICAgICAgICAgIHRocmlmdENsaWVudAogICAgICAgICAgICAgIC5nZXRSb2xlKHRoaXMuY29tcG9uZW50TmFtZSkKICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2U6IHN0cmluZykgPT4gewogICAgICAgICAgICAgICAgdGhpcy5wZW9wbGVBcnIucHVzaChyZXNwb25zZS5pZCk7CiAgICAgICAgICAgICAgICB0aGlzLnBlb3BsZUFyci5wdXNoKHJlc3BvbnNlLm5hbWUpOwogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmFkZHJlc3MgPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5wZW9wbGVBcnIucHVzaCgiQ09ORklERU5USUFMIik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB0aGlzLnBlb3BsZUFyci5wdXNoKHJlc3BvbnNlLmFkZHJlc3MpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnBob25lID09ICIiKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMucGVvcGxlQXJyLnB1c2goIkNPTkZJREVOVElBTCIpOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICB0aGlzLnBlb3BsZUFyci5wdXNoKHJlc3BvbnNlLnBob25lKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTsKCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHBlb3BsZUFycik7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gU0VUIFRIRSBUT0tFTiBJTiBUSEUgTE9DQUxTVE9SQUdFCiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidnVlLXRva2VuIiwgU3RyaW5nKHRoaXMua2V5Y2xvYWsudG9rZW4pKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKAogICAgICAgICAgICAidnVlLXJlZnJlc2gtdG9rZW4iLAogICAgICAgICAgICBTdHJpbmcodGhpcy5rZXljbG9hay5yZWZyZXNoVG9rZW4pCiAgICAgICAgICApOwoKICAgICAgICAgIC8vIEhBTkRMRSBUT0tFTiBUSU1FT1VUCiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgdGhpcy5rZXljbG9hawogICAgICAgICAgICAgIC51cGRhdGVUb2tlbig3MCkKICAgICAgICAgICAgICAuc3VjY2VzcyhyZWZyZXNoZWQgPT4gewogICAgICAgICAgICAgICAgaWYgKHJlZnJlc2hlZCkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiVG9rZW4gUmVmcmVzaGVkIik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiVG9rZW4gTm90IFJlZnJlc2hlZCIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmVycm9yKCgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJGYWlsZWQgVG8gUmVmcmVzaCBUb2tlbiIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfSwgNjAwMDApOwogICAgICAgIH0pCiAgICAgICAgLmVycm9yKCgpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJBVVRIRU5USUNBVElPTiBGQUlMRUQiKTsKICAgICAgICB9KTsKCiAgICAgIC8vIGtleWNsb2FrLmxvZ291dCgpOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMubG9hZFBhZ2UoKTsKICB9Cn0pOwo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <v-app>\n    <Nav v-bind:headerName=\"headerName\" v-bind:keycloak=\"keycloak\" />\n    <!-- Call the correct components according to data -->\n    <v-content>\n      <br>\n      <span class=\"display-3 font-weight-thin pa-8\">Thrift Example:</span>\n      <component\n        v-bind:is=\"componentName\"\n        v-bind:peopleArr=\"peopleArr\"\n        v-bind:peopleHeader=\"peopleHeader\"\n      />\n      <!-- <v-btn v-on:click=\"logOut\">LOGOUT</v-btn> -->\n    </v-content>\n  </v-app>\n</template>\n\n<script lang=\"ts\">\nimport Vue from \"vue\";\n// ADD THE NEW COMPONENTS\nimport User from \"./components/User.vue\";\nimport Admin from \"./components/Admin.vue\";\nimport Nav from \"./components/Nav.vue\";\n// ADD KEYCLOAK\nimport Keycloak from \"../node_modules/keycloak-js/dist/keycloak\";\n// ADD THRIFT\nimport {\n  createHttpConnection,\n  createHttpClient,\n  HttpConnection,\n  TBufferedTransport,\n  TJSONProtocol\n} from \"thrift\";\n//ADD STUBS\n// import { Client as HelloServiceClient } from \"@/gen-js/HelloService\";\nimport { Client as HelloServiceClient } from \"@/gen-js/HelloService\";\nimport { Person } from \"@/gen-js/Person\";\n\n// The location of the server endpoint\nconst CONFIG = {\n  hostName: \"localhost\",\n  port: 9090\n};\n\nconst options = {\n  transport: TBufferedTransport,\n  protocol: TJSONProtocol,\n  https: false,\n  headers: {\n    Host: CONFIG.hostName\n  }\n};\n\nconst connection: HttpConnection = createHttpConnection(\n  CONFIG.hostName,\n  CONFIG.port,\n  options\n);\nconst thriftClient: HelloServiceClient = createHttpClient(\n  HelloServiceClient,\n  connection\n);\n\nexport default Vue.extend({\n  name: \"App\",\n\n  components: {\n    User,\n    Admin,\n    Nav\n  },\n\n  data: () => ({\n    componentName: \"\",\n    peopleArr: [],\n    objArr: [],\n    peopleHeader: [\"ID\", \"Name\", \"Address\", \"Phone\"],\n    role: String,\n    headerName: String,\n    initOptions: {\n      realm: \"keycloak-demo\",\n      url: \"http://localhost:8080/auth/\",\n      clientId: \"vue-test-app\"\n    },\n    keycloak: Keycloak()\n  }),\n  methods: {\n    loadPage(): any {\n      // THIS IS THE COPIED CODE FROM THE KEYCLOAK ADMINISTRATION CONSOLE. JUST ADAPT IT, SO THAT IT MATHES THIS FORMAT\n      this.keycloak = Keycloak(this.initOptions);\n\n      let roles = \"\";\n\n      this.keycloak\n        .init({\n          onLoad: \"login-required\"\n        })\n        .success((auth: any) => {\n          // CHECK IF THE USER IS AUTHENTICATED\n          if (!auth) {\n            window.location.reload();\n          } else {\n            console.log(\"SUCCESSFULLY AUTHENTICATED\");\n\n            // CHECK WHAT ROLES THEY HAVE AND DISPLAY THE COMPONENT ACCORDING TO THE ROLE\n            roles = JSON.parse(JSON.stringify(this.keycloak.tokenParsed));\n            this.role = roles.realm_access.roles;\n            this.componentName = String(this.role);\n\n            this.headerName = this.componentName == \"admin\" ? \"deep-purple lighten-1\" : \"purple darken-4\";\n\n            console.log(\"Submitting...\");\n\n            thriftClient\n              .getRole(this.componentName)\n              .then((response: string) => {\n                this.peopleArr.push(response.id);\n                this.peopleArr.push(response.name);\n                if (response.address == \"\") {\n                  this.peopleArr.push(\"CONFIDENTIAL\");\n                } else {\n                  this.peopleArr.push(response.address);\n                }\n                if (response.phone == \"\") {\n                  this.peopleArr.push(\"CONFIDENTIAL\");\n                }else{\n                   this.peopleArr.push(response.phone);\n                }\n              })\n              .catch(console.error);\n\n            // console.log(peopleArr);\n          }\n\n          // SET THE TOKEN IN THE LOCALSTORAGE\n          localStorage.setItem(\"vue-token\", String(this.keycloak.token));\n          localStorage.setItem(\n            \"vue-refresh-token\",\n            String(this.keycloak.refreshToken)\n          );\n\n          // HANDLE TOKEN TIMEOUT\n          setTimeout(() => {\n            this.keycloak\n              .updateToken(70)\n              .success(refreshed => {\n                if (refreshed) {\n                  console.log(\"Token Refreshed\");\n                } else {\n                  console.log(\"Token Not Refreshed\");\n                }\n              })\n              .error(() => {\n                console.log(\"Failed To Refresh Token\");\n              });\n          }, 60000);\n        })\n        .error(() => {\n          console.log(\"AUTHENTICATION FAILED\");\n        });\n\n      // keycloak.logout();\n    }\n  },\n  mounted() {\n    this.loadPage();\n  }\n});\n</script>\n"]}]}